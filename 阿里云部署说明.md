# 阿里云服务器部署说明

## 环境变量配置

为了让爬虫数据直接保存到阿里云服务器的 `/home/data` 目录，需要设置环境变量。

### 方法1：临时设置（推荐用于测试）

```bash
# 设置环境变量
export IFIXIT_DATA_DIR="/home/data"

# 运行爬虫
python auto_crawler.py 'MacBook_Pro_17%22'
```

### 方法2：永久设置（推荐用于生产环境）

编辑用户的 `.bashrc` 文件：

```bash
# 编辑配置文件
nano ~/.bashrc

# 在文件末尾添加以下行：
export IFIXIT_DATA_DIR="/home/data"

# 重新加载配置
source ~/.bashrc
```

### 方法3：系统级设置

编辑系统环境变量文件：

```bash
# 编辑系统环境变量
sudo nano /etc/environment

# 添加以下行：
IFIXIT_DATA_DIR="/home/data"

# 重启终端或重新登录生效
```

## 目录权限设置

确保 `/home/data` 目录存在且有写入权限：

```bash
# 创建目录
sudo mkdir -p /home/data

# 设置权限（根据需要调整用户名）
sudo chown -R $USER:$USER /home/data
sudo chmod -R 755 /home/data
```

## 验证配置

检查环境变量是否设置成功：

```bash
echo $IFIXIT_DATA_DIR
# 应该输出：/home/data
```

## 运行示例

```bash
# 设置环境变量
export IFIXIT_DATA_DIR="/home/data"

# 运行爬虫（数据将保存到 /home/data/Device/ 目录下）
python auto_crawler.py 'MacBook_Pro_17%22' --verbose

# 检查结果
ls -la /home/data/Device/
```

## 注意事项

1. **向后兼容**：如果不设置环境变量，代码仍然会使用默认的 `ifixit_data` 目录
2. **路径格式**：环境变量值应该是绝对路径，如 `/home/data`
3. **权限检查**：确保指定的目录有写入权限
4. **磁盘空间**：确保目标目录有足够的磁盘空间存储爬取的数据

## 故障排除

### 权限错误
```bash
# 如果遇到权限错误，检查目录权限
ls -la /home/data
sudo chown -R $USER:$USER /home/data
```

### 环境变量未生效
```bash
# 检查环境变量
env | grep IFIXIT_DATA_DIR

# 重新设置
export IFIXIT_DATA_DIR="/home/data"
```

### 目录不存在
```bash
# 创建目录
mkdir -p /home/data
```
